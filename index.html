<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ูุธุงู ุญุถูุฑ ุงููุฑูุฒ V3</title>

  <link rel="stylesheet" href="style.css?v=3">

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>

  <div id="loginBox" class="card">
    <h1>ุฏุฎูู ููุญุฉ ุงูุณูุชุฑ</h1>
    <p class="muted">ุงูุฏุฎูู ูููุณุคูู ููุท</p>

    <label class="lbl">Username</label>
    <input id="user" class="inp" type="text" placeholder="ุงุณู ุงููุณุชุฎุฏู">

    <label class="lbl">Password</label>
    <div class="passWrap">
      <input id="pass" class="inp" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">
      <button id="togglePass" class="eyeBtn" type="button" title="ุฅุธูุงุฑ/ุฅุฎูุงุก">๐๏ธ</button>
    </div>

    <button id="loginBtn" class="btn primary">ุฏุฎูู</button>
    <div id="loginMsg" class="msg"></div>
  </div>

  <div id="appBox" class="hidden">

    <div class="topbar">
      <div class="brand">
        ููุญุฉ ุงูุณูุชุฑ
        <div class="topStats">
          <span class="statItem">๐ฅ ูุณุฌููู: <b id="totalStudentsCount">0</b></span>
          <span class="statItem">โ ุญุถูุฑ ุงูููู: <b id="todayCountTop">0</b></span>
        </div>
      </div>

      <div class="topActions">
        <button id="exportExcelBtn" class="btn">ุชุตุฏูุฑ Excel</button>
        <label class="btn fileBtn" for="importExcelInput">ุงุณุชูุฑุงุฏ Excel</label>
        <input id="importExcelInput" type="file" accept=".xlsx,.xls" style="display:none;">
        <button id="logoutBtn" class="btn danger">ุฎุฑูุฌ</button>
      </div>
    </div>

    <div class="grid2">
      <div class="card">
        <h2>ุณุฑูุน (QR)</h2>
        <p class="muted">ุชุณุฌูู ุญุถูุฑ ููุฑู ุจุฑูู ID.</p>
        <div class="row">
          <input id="quickAttendId" class="inp" inputmode="numeric" placeholder="ุงูุชุจ ID ููุง">
          <button id="quickAttendBtn" class="btn primary">ุณุฌู ุญุถูุฑ</button>
        </div>
        <div id="quickMsg" class="msg"></div>
      </div>

      <div class="card">
        <h2>ุจุญุซ ุดุงูู</h2>
        <p class="muted">ุงุจุญุซ ุจุงูุงุณูุ ุงูููุจุงููุ ุฃู ID.</p>
        
        <div class="row">
          <input id="openId" class="inp" inputmode="numeric" placeholder="ูุชุญ ุจู ID ูุจุงุดุฑ">
          <button id="openBtn" class="btn">ูุชุญ</button>
        </div>

        <div class="row">
          <input id="searchAny" class="inp" placeholder="ุงุจุญุซ ููุง...">
          <button id="searchAnyBtn" class="btn" style="display:none;">๐</button>
        </div>
        
        <div id="searchMsg" class="msg"></div>
      </div>
    </div>

    <div class="card">
      <h2>+ ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h2>
      <p class="muted">ุงูุณูุณุชู ููู 500 ููุงู ุฌุงูุฒุ ุงุณุชุฎุฏู ุฏู ูู ุนุงูุฒ ุชุถูู ุฒูุงุฏุฉ.</p>
      <div class="row">
        <input id="newId" class="inp" inputmode="numeric" placeholder="ุงูุชุจ ID ุฌุฏูุฏ (ูุซุงู 501)">
        <button id="addNewBtn" class="btn">ุฅุถุงูุฉ</button>
      </div>
      <div id="addMsg" class="msg"></div>
    </div>

    <div class="card">
      <div class="flexBetween">
        <h2>ุญุถูุฑ ุจุชุงุฑูุฎ</h2>
        <button id="copyReportBtn" class="btn success smallBtn">ูุณุฎ ุงูููุฎุต ๐</button>
      </div>
      
      <div class="row">
        <input id="reportDate" class="inp" type="date">
        <button id="reportBtn" class="btn">ุนุฑุถ</button>
      </div>

      <div class="badges">
        <span class="badge" id="reportDateLabel">ุงูุชุงุฑูุฎ: โ</span>
        <span class="badge" id="reportCount">ุนุฏุฏ ุงูุญุถูุฑ: 0</span>
      </div>

      <div id="reportList" class="list mutedCenter">โ ูุง ููุฌุฏ ุญุถูุฑ ูู ูุฐุง ุงูุชุงุฑูุฎ โ</div>
    </div>

    <div class="grid2">
      <div class="card studentCard">
        <h2>ุจูุงูุงุช ุงูุทุงูุจ <span id="newBadge" class="newBadge hidden">ุฌุฏูุฏ</span></h2>

        <div class="studentHead">
          <div class="pill" id="studentIdPill">ID: โ</div>
          <div class="pill" id="todayStatus">ุงูููู: โ</div>
          <div class="pill" id="lastAttend">ุขุฎุฑ ุญุถูุฑ: โ</div>
          <div class="pill" id="daysCount">ุนุฏุฏ ูุฑุงุช ุงูุญุถูุฑ: โ</div>
        </div>

        <label class="lbl">ุงูุงุณู</label>
        <input id="stName" class="inp" placeholder="ุงุณู ุงูุทุงูุจ ุฑุจุงุนู">

        <label class="lbl">ุงูุตู / ุงููุฌููุนุฉ</label>
        <input id="stClass" class="inp" placeholder="ูุซุงู: 3 ุซุงููู - ูุฌููุนุฉ ุงูุณุจุช">

        <label class="lbl">ุฑูู ุงูููุจุงูู (ูุน ูุงุชุณุงุจ)</label>
        <div class="row">
          <input id="stPhone" class="inp" inputmode="tel" placeholder="01xxxxxxxxx">
          <button id="waBtn" class="btn success" style="width:auto; padding:0 15px;" title="ูุชุญ ูุงุชุณุงุจ">๐ฌ</button>
        </div>

        <label class="lbl">ุงููุตุงุฑูู (ุงููุฏููุน)</label>
        <input id="stPaid" class="inp" inputmode="numeric" placeholder="ุงููุจูุบ ุงููุฏููุน">

        <label class="lbl">ููุงุญุธุงุช (ุฎุงุตุฉ ูุง ุชุธูุฑ ูู ุงูุจุญุซ)</label>
        <textarea id="stNotes" class="inp" rows="2" placeholder="ุงูุชุจ ููุงุญุธุงุช ุนู ุงูุทุงูุจ..."></textarea>

        <div class="row wrap" style="margin-top:15px;">
          <button id="saveStudentBtn" class="btn primary">ุญูุธ ุงูุจูุงูุงุช</button>
          <button id="markTodayBtn" class="btn success">โ ุญุถูุฑ</button>
          <button id="unmarkTodayBtn" class="btn warning">โ ุบูุงุจ</button>
        </div>

        <div id="studentMsg" class="msg"></div>
      </div>

      <div class="card">
        <h2>ุณุฌู ุงูุชูุงุฑูุฎ (ุขุฎุฑ 25)</h2>
        <div id="attList" class="list mutedCenter">โ ุงูุชุญ ุทุงูุจ โ</div>
      </div>
    </div>

    <div class="card dangerZone">
      <h2>โ๏ธ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช (ููุทูุฉ ุงูุฎุทุฑ)</h2>
      
      <div class="dangerSection">
        <h3>1. ุจุฏุก ุชุฑู ุฌุฏูุฏ (ูุณุญ ุฌุฒุฆู)</h3>
        <p class="muted">ููุณุญ ุชูุงุฑูุฎ ุงูุญุถูุฑ ูุงููุตุงุฑูู ููุท. (ูุญุงูุธ ุนูู ุงูุฃุณูุงุก).</p>
        <div class="row">
          <input id="termPass" class="inp" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">
          <button id="resetTermBtn" class="btn warning">ุชุตููุฑ ุงูุชุฑู</button>
        </div>
      </div>

      <hr style="margin:20px 0; border:0; border-top:1px solid #ddd;">

      <div class="dangerSection">
        <h3>2. ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุน (ูุณุญ ููู)</h3>
        <p class="muted">ููุณุญ ูู ุดูุก (ุงูุฃุณูุงุก ูุงูุญุถูุฑ) ููุฑุฌุน ุงูุณูุณุชู ุฌุฏูุฏ.</p>
        <div class="row">
          <input id="resetPass" class="inp" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">
          <button id="resetBtn" class="btn danger">ูุณุญ ูู ุงูุจูุงูุงุช</button>
        </div>
      </div>
      
      <div id="resetMsg" class="msg"></div>
    </div>

  </div>

  <script src="app.js?v=3"></script>
</body>
</html>
